# Типы указателей в `git`

В распределённой системе контроля версий `git` каждый мало-мальски значимый тип данных имеет имеет свой 
уникальный отпечаток — контрольную сумму SHA-1 длиной в 40 символов шестнадцатеричной системы счисления 
(от `0` до `9` и от `A` до `F`). По нему можно обращаться к какому-то определённому объекту, например, к 
коммиту или ветке. Но работать только с ними было бы не совсем удобно, поэтому в системах контроля версий 
создали именованые указатели; в `git` для обычного пользователя они в основном представляются указателями 
на все существующие в проекте ветки, указателем на указатель на текущую ветку (`HEAD`) и на статические 
указатели (теги).

Каждый коммит имеет в себе информацию о всех его зафиксированных изменениях и о предыдущем коммите (если 
таковой имеется). Если рассматривать более подробно, то файл коммита является очередным промежуточным звеном 
человеко-машинного интерфейса: в нём хранятся метаданные формального коммита и указатель на так называемый 
`tree`-объект (не путать с ветвями!), хранящий в себе другие указатели, на этот раз — на `blob`-объекты, в 
которых уже и находятся запакованные данные и метаданные. `blob` расшифровывется как "Binary Large OBject", 
то есть, дословно, "Большой бинарный объект" — элементарная единица данных в `git`.

Выглядит это для трёх файлов в одном коммите примерно так:
```
                     /-> blob1a (file 1a: metadata, data)
                    /
commit1 -> treeobj1 ---> blob1b (file 1b: metadata, data)
                    \
                     \-> blob1c (file 1c: metadata, data)
```

Напомним: как уже было сказано, для каждого неабстрактного объекта в `git` вычисляется его контрольная сумма, 
являющаяся, фактически, уникальным отпечатком на этот объект.

P. S.: В реальном мире вероятность совпадения хэшей стремится к нулю, но 
[здесь](https://stackoverflow.com/questions/9392365/how-would-git-handle-a-sha-1-collision-on-a-blob) 
есть демонстрация теоретической ошибки при коллизии двух контрольных сумм в `git`.


## Ветки

Технически файл ветки в `git` является всего лишь ссылкой на последний коммит, связанный с данной формальной 
ветвью: внутри такого файла имеется хэш-сумма SHA-1 нужного коммита.

При инициализации пустого репозитория никакие ветки не создаются. При клонировании репозитория по умолчанию 
копируются и все ветки, существовавшие в родительском репозитории.


## `HEAD`

Указатель `HEAD` сам по себе почти всегда является лишь символической ссылкой на ветку, с которой сейчас 
производится работа; гораздо реже, в специфических случаях, он используется в качестве самостоятельной 
временной ветви. Находится он по пути `./.git/HEAD`.

При инициализации пустого репозитория `HEAD` указывает на потенциальную ветку названием из настройки 
"`init.defaultBranch`", по умолчанию в клиентах `git` — "`master`".


## Теги

Тег является статическим указателем на определённый объект в базе данных `git`, чаще всего — на какой-либо
коммит. "Статический" в данном контексте означает, что автоматически он не переместится никогда, и 
передвинуть его можно только вручную. Файл тега имеет в себе указатель на свою цель, а также метаданные: 
название, имя его создателя, временнýю метку и т. д.
